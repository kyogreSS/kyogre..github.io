<!doctype html>



  


<html class="theme-next mist use-motion" lang="Chinese">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="react-router整理 其实之前我已经看过一遍了，而且照着官方示例库敲了一遍。之后做别的事去了。等回过神来，半个月过去，东西忘得一干二净。一句也写不出来了。这还了得，毛骨悚然。必须想措施来防止遗忘了。  官方示例库：https://github.com/reactjs/react-router-tutorial.git 渲染一个路由和react的用法一样。React和Vue的区别，最重要的一">
<meta name="keywords">
<meta property="og:type" content="article">
<meta property="og:title" content="react-router整理">
<meta property="og:url" content="http://kyogreSS.github.io/2017/06/26/react-router整理/index.html">
<meta property="og:site_name" content="不破小子">
<meta property="og:description" content="react-router整理 其实之前我已经看过一遍了，而且照着官方示例库敲了一遍。之后做别的事去了。等回过神来，半个月过去，东西忘得一干二净。一句也写不出来了。这还了得，毛骨悚然。必须想措施来防止遗忘了。  官方示例库：https://github.com/reactjs/react-router-tutorial.git 渲染一个路由和react的用法一样。React和Vue的区别，最重要的一">
<meta property="og:updated_time" content="2017-06-26T13:49:23.519Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="react-router整理">
<meta name="twitter:description" content="react-router整理 其实之前我已经看过一遍了，而且照着官方示例库敲了一遍。之后做别的事去了。等回过神来，半个月过去，东西忘得一干二净。一句也写不出来了。这还了得，毛骨悚然。必须想措施来防止遗忘了。  官方示例库：https://github.com/reactjs/react-router-tutorial.git 渲染一个路由和react的用法一样。React和Vue的区别，最重要的一">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://kyogreSS.github.io/2017/06/26/react-router整理/"/>





  <title>react-router整理 | 不破小子</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="Chinese">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">不破小子</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kyogreSS.github.io/2017/06/26/react-router整理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kyogreSS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/kyogre.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不破小子">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">react-router整理</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-26T21:48:26+08:00">
                2017-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="react-router整理"><a href="#react-router整理" class="headerlink" title="react-router整理"></a>react-router整理</h1><blockquote>
<p>其实之前我已经看过一遍了，而且照着官方示例库敲了一遍。之后做别的事去了。等回过神来，半个月过去，东西忘得一干二净。一句也写不出来了。这还了得，毛骨悚然。必须想措施来防止遗忘了。</p>
</blockquote>
<p>官方示例库：<a href="https://github.com/reactjs/react-router-tutorial.git" target="_blank" rel="external">https://github.com/reactjs/react-router-tutorial.git</a></p>
<h2 id="渲染一个路由"><a href="#渲染一个路由" class="headerlink" title="渲染一个路由"></a>渲染一个路由</h2><p>和react的用法一样。React和Vue的区别，最重要的一点，就是Vue在使用的时候，引入一次就能用里面的所有东西了。但React需要引入不同的部件，需要什么就要引入什么。<br>比如这里的router，需要引入<code>Router</code>、<code>Route</code>、<code>hashHistory</code>这三个。因为这三个都是react-router里的，所以要这么引用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &#123;Router,Route,hashHistory&#125; from &apos;react-router&apos;</div></pre></td></tr></table></figure></p>
<p>大写开头的，在react里是组件的标志。这点要养成习惯，大写开头，就是一个组件。<br>于是，我们的Router、Router要这么用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">render((</div><div class="line">  &lt;Router history=&#123;hashHistory&#125;&gt;</div><div class="line">    &lt;Route path=&apos;/&apos; component=&#123;App&#125;&gt;&lt;/Route&gt;</div><div class="line">    &lt;Route path=&apos;/repos&apos; component=&#123;Repos&#125;&gt;&lt;/Route&gt;</div><div class="line">    &lt;Route path=&apos;/about&apos; component=&#123;About&#125;&gt;&lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">  ),document.getElementById(&apos;app&apos;))</div></pre></td></tr></table></figure></p>
<p>这里的代码，意思是如果路由是<code>/</code>，就加载App组件。如果是其他的，就加载其他的。  </p>
<h2 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h2><p>渲染路由好理解，但我们如何从App组件里跳转到其他组件呢？难不成每次跳转要手动输入地址？<br>当然不是，有个Link组件，也是react-router里的，专门用来跳转路由。<br>Vue只要引入一次就可以用<code>router-link</code>这个标签了，但react还要这么引入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">import &#123;Link&#125; from &apos;react-router&apos;</div></pre></td></tr></table></figure></p>
<p>它类似于a标签，有个to属性，写起来是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// modules/App.js</div><div class="line">import React from &apos;react&apos;</div><div class="line">import &#123; Link &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h1&gt;React Router Tutorial&lt;/h1&gt;</div><div class="line">        &lt;ul role=&quot;nav&quot;&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/repos&quot;&gt;Repos&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>这么一来，就可以跳转到路由的各组件了。  </p>
<h2 id="深层路由"><a href="#深层路由" class="headerlink" title="深层路由"></a>深层路由</h2><p>那我们想要这种效果：路由是<code>/</code>的时候，只显示App，当是<code>/about</code>的时候，显示App，App里面显示about，当是<code>/repos</code>的时候，显示App，App里面显示repos，怎么办呢。<br>这个和Vue的slot类似。把要显示的东西放进<code>&lt;route&gt;&lt;/route&gt;</code>标签里包裹起来，然后设置跳转，这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// index.js</div><div class="line">// ...</div><div class="line">render((</div><div class="line">  &lt;Router history=&#123;hashHistory&#125;&gt;</div><div class="line">    &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">      &#123;/* make them children of `App` */&#125;</div><div class="line">      &lt;Route path=&quot;/repos&quot; component=&#123;Repos&#125;/&gt;</div><div class="line">      &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</div><div class="line">    &lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;app&apos;))</div></pre></td></tr></table></figure></p>
<p>在App里面做点小小的修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// modules/App.js</div><div class="line">// ...</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h1&gt;React Router Tutorial&lt;/h1&gt;</div><div class="line">        &lt;ul role=&quot;nav&quot;&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/repos&quot;&gt;Repos&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line"></div><div class="line">        &#123;/* add this */&#125;</div><div class="line">        &#123;this.props.children&#125;</div><div class="line"></div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">// ...</div></pre></td></tr></table></figure></p>
<p>没错，加一个<code>{this.props.children}</code>。其实它的原理是，在设置路由跳转后，路由变成了<code>&lt;App&gt; &lt;About /&gt; &lt;/App&gt;</code>，About内容变成了App的props.children，显示在App里面。<br>这和Vue里slot差不多，不同的是，Vue用slot标签来接收子元素，而react用this.props.children来接收。当然，Vue也有一个this.$slots.default用代码的形式接收slot内容。</p>
<h2 id="Link激活的样式"><a href="#Link激活的样式" class="headerlink" title="Link激活的样式"></a>Link激活的样式</h2><p>我们点了Link，应该和a标签一样，有一个激活的样式，对吧？怎么写呢？<br>用<code>activeStyle</code>属性和<code>activeClassName</code>属性！<br>这是给Link用的，专门用来设定激活后的样式的。比如这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// modules/App.js</div><div class="line">&lt;li&gt;&lt;Link to=&quot;/about&quot; activeStyle=&#123;&#123; color: &apos;red&apos; &#125;&#125;&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">&lt;li&gt;&lt;Link to=&quot;/repos&quot; activeStyle=&#123;&#123; color: &apos;red&apos; &#125;&#125;&gt;Repos&lt;/Link&gt;&lt;/li&gt;</div></pre></td></tr></table></figure></p>
<p>或者这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// modules/App.js</div><div class="line">&lt;li&gt;&lt;Link to=&quot;/about&quot; activeClassName=&quot;active&quot;&gt;About&lt;/Link&gt;&lt;/li&gt;</div><div class="line">&lt;li&gt;&lt;Link to=&quot;/repos&quot; activeClassName=&quot;active&quot;&gt;Repos&lt;/Link&gt;&lt;/li&gt;</div></pre></td></tr></table></figure></p>
<p>如此一来，Link在激活的时候，就能显示自己想要的样式了！<br>可以自己封装一下，比如这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">// modules/NavLink.js</div><div class="line">import React from &apos;react&apos;</div><div class="line">import &#123; Link &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return &lt;Link &#123;...this.props&#125; activeClassName=&quot;active&quot;/&gt;</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line">//在别的文件里引入一下</div><div class="line">// modules/App.js</div><div class="line">import NavLink from &apos;./NavLink&apos;</div><div class="line"></div><div class="line">// ...</div><div class="line"></div><div class="line">&lt;li&gt;&lt;NavLink to=&quot;/about&quot;&gt;About&lt;/NavLink&gt;&lt;/li&gt;</div><div class="line">&lt;li&gt;&lt;NavLink to=&quot;/repos&quot;&gt;Repos&lt;/NavLink&gt;&lt;/li&gt;</div></pre></td></tr></table></figure></p>
<h2 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h2><p>在实践中，我们不能老是写确定的路由吧，有很多匹配的路由，都是动态的，我们没办法知道后面的参数具体是什么，只有用的时候才知道，这该怎么办呢？<br>用动态路由匹配+params解决！<br>这个动态匹配用的是<code>/:someName</code>，中间加一个冒号，它就能自动匹配后面的字符串，并且把它赋值给<code>someName</code>这个属性，举个栗子：<code>/reops/reactjs</code>和<code>/repos/react</code>都可以匹配到<code>/repos/:value</code>这个路由，而且可以通过<code>this.props.params.value</code>来获取到<code>reactjs</code>和<code>react</code>这两个值！<br>我们在顶层这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// ...</div><div class="line">// import Repo</div><div class="line">import Repo from &apos;./modules/Repo&apos;</div><div class="line"></div><div class="line">render((</div><div class="line">  &lt;Router history=&#123;hashHistory&#125;&gt;</div><div class="line">    &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">      &lt;Route path=&quot;/repos&quot; component=&#123;Repos&#125;/&gt;</div><div class="line">      &#123;/* add the new route */&#125;</div><div class="line">      &lt;Route path=&quot;/repos/:userName/:repoName&quot; component=&#123;Repo&#125;/&gt;</div><div class="line">      &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</div><div class="line">    &lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;app&apos;))</div></pre></td></tr></table></figure></p>
<p>App这个组件下有通过路由匹配的子组件。一个是repos，一个是动态路由repo，最后一个是about。然后在repos里这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// Repos.js</div><div class="line">import &#123; Link &#125; from &apos;react-router&apos;</div><div class="line">// ...</div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h2&gt;Repos&lt;/h2&gt;</div><div class="line"></div><div class="line">        &#123;/* add some links */&#125;</div><div class="line">        &lt;ul&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/repos/reactjs/react-router&quot;&gt;React Router&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to=&quot;/repos/facebook/react&quot;&gt;React&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line"></div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>它跳转到<code>/repos/reactjs/react-router</code>或者<code>reops/facebook/react</code>里面。点击后，会匹配到顶层动态路由，这时候，在repo里这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// modules/Repo.js</div><div class="line">import React from &apos;react&apos;</div><div class="line"></div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h2&gt;&#123;this.props.params.repoName&#125;&lt;/h2&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>就可以拿到repoName了！  </p>
<h2 id="动态-嵌套路由"><a href="#动态-嵌套路由" class="headerlink" title="动态+嵌套路由"></a>动态+嵌套路由</h2><p>就是用父组件标签把子组件标签包裹起来，然后子组件用的是动态路由，在父组件里，用<code>this.props.children</code>来访问子组件就Ok了。例子是这么写的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// index.js</div><div class="line">// ...</div><div class="line">&lt;Route path=&quot;/repos&quot; component=&#123;Repos&#125;&gt;</div><div class="line">  &lt;Route path=&quot;/repos/:userName/:repoName&quot; component=&#123;Repo&#125;/&gt;</div><div class="line">&lt;/Route&gt;</div><div class="line">// Repos.js</div><div class="line">// ...</div><div class="line">&lt;div&gt;</div><div class="line">  &lt;h2&gt;Repos&lt;/h2&gt;</div><div class="line">  &lt;ul&gt;</div><div class="line">    &lt;li&gt;&lt;Link to=&quot;/repos/reactjs/react-router&quot;&gt;React Router&lt;/Link&gt;&lt;/li&gt;</div><div class="line">    &lt;li&gt;&lt;Link to=&quot;/repos/facebook/react&quot;&gt;React&lt;/Link&gt;&lt;/li&gt;</div><div class="line">  &lt;/ul&gt;</div><div class="line">  &#123;/* will render `Repo.js` when at /repos/:userName/:repoName */&#125;</div><div class="line">  &#123;this.props.children&#125;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<h2 id="主页路由"><a href="#主页路由" class="headerlink" title="主页路由"></a>主页路由</h2><p>如果，我们想一直有一个主页路由，如果按照之前的写法，要这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// modules/Home.js</div><div class="line">import React from &apos;react&apos;</div><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return &lt;div&gt;Home&lt;/div&gt;</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">// modules/App.js</div><div class="line">import Home from &apos;./Home&apos;</div><div class="line">&lt;div&gt;</div><div class="line">  &#123;/* ... */&#125;</div><div class="line">  &#123;this.props.children || &lt;Home/&gt;&#125;</div><div class="line">&lt;/div&gt;</div><div class="line">//...</div></pre></td></tr></table></figure></p>
<p>这么写的不好的地方在于，我们想只用<code>/</code>来访问Home，而访问其他路由的时候，隐藏掉Home里的部分内容，显示成其他组件，似乎很难实现。根组件自己独特的部分放在哪里呢？<br>用<code>IndexRoute</code>！先引入一下，再用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// index.js</div><div class="line">// new imports:</div><div class="line">// add `IndexRoute` to &apos;react-router&apos; imports</div><div class="line">import &#123; Router, Route, hashHistory, IndexRoute &#125; from &apos;react-router&apos;</div><div class="line">// and the Home component</div><div class="line">import Home from &apos;./modules/Home&apos;</div><div class="line">render((</div><div class="line">  &lt;Router history=&#123;hashHistory&#125;&gt;</div><div class="line">    &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">      &#123;/* add it here, as a child of `/` */&#125;</div><div class="line">      &lt;IndexRoute component=&#123;Home&#125;/&gt;</div><div class="line"></div><div class="line">      &lt;Route path=&quot;/repos&quot; component=&#123;Repos&#125;&gt;</div><div class="line">        &lt;Route path=&quot;/repos/:userName/:repoName&quot; component=&#123;Repo&#125;/&gt;</div><div class="line">      &lt;/Route&gt;</div><div class="line">      &lt;Route path=&quot;/about&quot; component=&#123;About&#125;/&gt;</div><div class="line">    &lt;/Route&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;app&apos;))</div></pre></td></tr></table></figure></p>
<p>这个IndexRoute是写在<code>/</code>的路由底下的，这么一来，访问<code>/</code>的时候，Home作为根路由独特的部分显现出来，访问其他路由的时候，其他组件继承了共同的部分，而Home组件被隐藏了。</p>
<h2 id="主页链接"><a href="#主页链接" class="headerlink" title="主页链接"></a>主页链接</h2><p>如果我们一直按照上面的做下来，就会发现一个问题：链向<code>/</code>的这个Link始终是激活状态！<br>为什么呢？因为Link中activeStyle是对激活的标签有效，如果当前路由激活了，那这个路由的父路由也是激活状态呀。而且<code>/</code>这个是所有路由的父路由。这怎么办呢？<br>用<code>IndexLink</code>组件和<code>onlyActiveOnIndex</code>属性！<br>IndexLink用法，先引用：<code>import {IndexLink} from &#39;react-router&#39;</code>，然后和Link用法一样了。不同的是，只有它和当前路由完全匹配才被激活。<br><code>onlyActiveOnIndex</code>这个属性，这么用：<br><code>&lt;Link to=&#39;/&#39; activeClassName=&#39;active&#39; onlyActiveOnIndex={true}&gt;HOME&lt;/Link&gt;</code>，达成一样的效果。  </p>
<h2 id="完美的URL"><a href="#完美的URL" class="headerlink" title="完美的URL"></a>完美的URL</h2><p>用Vue的时候，会发现我们的路由里夹杂着一个’#’，这其实是因为Vue用的并不是真实路由，react也是，hashHistory并不是真实的显示在浏览器上的路由，browserHistory才是。用browserHistory代替掉hashHistory，我们就可以用浏览器地址栏里那样的纯净路由了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// index.js</div><div class="line">// ...</div><div class="line">// bring in `browserHistory` instead of `hashHistory`</div><div class="line">import &#123; Router, Route, browserHistory, IndexRoute &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">render((</div><div class="line">  &lt;Router history=&#123;browserHistory&#125;&gt;</div><div class="line">    &#123;/* ... */&#125;</div><div class="line">  &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;app&apos;))</div></pre></td></tr></table></figure></p>
<p>but，想这么做，还要在server里多设置一步：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;start&quot;: &quot;webpack-dev-server --inline --content-base . --history-api-fallback&quot;</div></pre></td></tr></table></figure></p>
<p>不仅在Link里的路由要改，html里link和script标签路径都要改成这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!-- index.html --&gt;</div><div class="line">&lt;!-- index.css -&gt; /index.css --&gt;</div><div class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/index.css&quot;&gt;</div><div class="line"></div><div class="line">&lt;!-- bundle.js -&gt; /bundle.js --&gt;</div><div class="line">&lt;script src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>加一个<code>/</code>啦。</p>
<h2 id="服务端渲染"><a href="#服务端渲染" class="headerlink" title="服务端渲染"></a>服务端渲染</h2><p>这部分并不懂。跳过以后说。</p>
<h2 id="跳转路由"><a href="#跳转路由" class="headerlink" title="跳转路由"></a>跳转路由</h2><p>之前都是用Link标签来跳转路由，但实际情况并非都是如此，我们会用Button之类的进行跳转，甚至各种莫名其妙的标签也要给它们设一个链接。如此一来，该怎么办呢？<br>用路由的Push方法！<br>和Vue一样，Vue通过<code>this.$router.push(&#39;url&#39;)</code>来跳转到其他页面，这里可以用<code>this.context.router.push(path)</code>来跳转。但首先要声明一下这个context属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">export default React.createClass(&#123;</div><div class="line"></div><div class="line">  // ask for `router` from context</div><div class="line">  contextTypes: &#123;</div><div class="line">    router: React.PropTypes.object</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  // ...</div><div class="line"></div><div class="line">  handleSubmit(event) &#123;</div><div class="line">    // ...</div><div class="line">    this.context.router.push(path)</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  // ..</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>这样。这个是React的声明props的地方。<br>还记得我们的browserHistory么？它可以这么用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// modules/Repos.js</div><div class="line">import &#123; browserHistory &#125; from &apos;react-router&apos;</div><div class="line"></div><div class="line">// ...</div><div class="line">  handleSubmit(event) &#123;</div><div class="line">    // ...</div><div class="line">    const path = `/repos/$&#123;userName&#125;/$&#123;repo&#125;`</div><div class="line">    browserHistory.push(path)</div><div class="line">  &#125;,</div><div class="line">// ...</div></pre></td></tr></table></figure></p>
<h2 id="差点弄混"><a href="#差点弄混" class="headerlink" title="差点弄混"></a>差点弄混</h2><p>Link的属性是to，Router和Route的属性是path。<br>path可以用通配符模糊匹配。根据阮一峰的博客，具体的规则是：  </p>
<ul>
<li><code>:paramName</code>：paramName匹配URL的一个部分。直到遇到下一个/、?、#为止。这个路径参数可以通过<code>this.props.params.paramName</code>取出</li>
<li><code>()</code>：()表示URL的这个部分是可选的</li>
<li><code>*</code>：*匹配任何字符，知道模式里面的下一个字符为止。匹配方式是非贪婪模式</li>
<li><code>**</code>：**匹配任意字符，直到下一个/、？、#为止。匹配方式是贪婪模式</li>
</ul>
<p>这个路由可以用相对路径，它自动继承父组件的路径。<br>有个特点：一旦发现匹配的路由，就不再匹配其他规则了。所以说，具体的绝对路由要放在通配路由上面，不然容易匹配不到。，阮一峰的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Router&gt;</div><div class="line">  &lt;Route path=&quot;/:userName/:id&quot; component=&#123;UserPage&#125;/&gt;</div><div class="line">  &lt;Route path=&quot;/about/me&quot; component=&#123;About&#125;/&gt;</div><div class="line">&lt;/Router&gt;</div></pre></td></tr></table></figure></p>
<p>应该先匹配<code>/about/me</code>，再匹配其他，不然容易匹不到。<br>获取当前路由的参数，用this.props.location.query.name来获取。  </p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/25/hexo搭建博客/" rel="prev" title="hexo搭建博客">
                hexo搭建博客 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/kyogre.jpg"
               alt="kyogreSS" />
          <p class="site-author-name" itemprop="name">kyogreSS</p>
           
              <p class="site-description motion-element" itemprop="description">前端学习笔记</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#react-router整理"><span class="nav-number">1.</span> <span class="nav-text">react-router整理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#渲染一个路由"><span class="nav-number">1.1.</span> <span class="nav-text">渲染一个路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由跳转"><span class="nav-number">1.2.</span> <span class="nav-text">路由跳转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#深层路由"><span class="nav-number">1.3.</span> <span class="nav-text">深层路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Link激活的样式"><span class="nav-number">1.4.</span> <span class="nav-text">Link激活的样式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#路由参数"><span class="nav-number">1.5.</span> <span class="nav-text">路由参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动态-嵌套路由"><span class="nav-number">1.6.</span> <span class="nav-text">动态+嵌套路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主页路由"><span class="nav-number">1.7.</span> <span class="nav-text">主页路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主页链接"><span class="nav-number">1.8.</span> <span class="nav-text">主页链接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#完美的URL"><span class="nav-number">1.9.</span> <span class="nav-text">完美的URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#服务端渲染"><span class="nav-number">1.10.</span> <span class="nav-text">服务端渲染</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#跳转路由"><span class="nav-number">1.11.</span> <span class="nav-text">跳转路由</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#差点弄混"><span class="nav-number">1.12.</span> <span class="nav-text">差点弄混</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kyogreSS</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
